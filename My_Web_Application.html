<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<head>
	<meta name="language" content="en">
	
	<link rel="stylesheet" type="text/css" href="./main.css" />
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" /></script>
	<title>My Web Application</title>
	</head>
	<div id='force' style='width:100%;height:60px;display:none; background-color:black;'></div>
<body>
<div class="container" id="page">

	<div id="header">
		<div id="logo">My Web Application</div>
	</div><!-- header -->

	<div id="mainmenu">
		<ul id="yw0">
<li class="active"><a href="http://local.yii.com/trackstar/index.php?r=site/index">Home</a></li>
<li><a href="http://local.yii.com/trackstar/index.php?r=site/page&view=about">About</a></li>
</ul>	</div><!-- mainmenu -->
			<!-- breadcrumbs -->
	
	<div id="content">
	
<h1>Welcome to <i>My Web Application</i></h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1>aaaa</h1>
<h1 id="a">aaaa</h1>
 
 <p>
    You last logged in on Monday, August 20, 2012, 1:53 pm. 
</p>



	<div class="clear"></div>

	<div id="footer">
		Copyright © 2012 by My Company.<br>
		All Rights Reserved.<br>
	</div><!-- footer -->

</div><!-- page -->
<label for="wheelDelta">滚动值:</label><input type="text" id="t1"/>

<script type="text/javascript" charset="utf-8">
$(document).ready(function(){
	
	function getWheelValue(e) 
	{ 
		e = e || event; 
		return (e.wheelDelta?e.wheelDelta/120:-(e.detail%3 == 0?e.detail/3:e.detail)) ; 
	}
	
	//绑定事件,这里对mousewheel做了判断,注册时统一使用mousewheel 
	function addEvent(obj, type, fn) 
	{ 
		var isFirefox = typeof document.body.style.MozUserSelect != 'undefined';
		if(document.addEventListener)
		{
			document.addEventListener(isFirefox?'DOMMouseScroll':type, fn ,false); 
		}
		else
		{
			document.attachEvent('on'+type, fn);
		}
		return fn;
	}
	var bot=document.body.scrollHeight-document.documentElement.clientHeight;
	
		//$('body').children().before("<div id='force' style='width:100%;height:60px;display:none; background-color:black;'></div>");
		//$('body').append($("<div id='force2' style='width:100%;height:60px;display:none; background-color:black;'></div>"));
		addEvent( $('body'), 'mousewheel',function(e)
		{
			var bodyTop = document.body.scrollTop;
			$('#a').html(bodyTop+','+bot+','+getWheelValue(e));
			var istop=getWheelValue(e)>0;
			if(bodyTop==0 && istop){
				$('#force').slideDown(300,function(){
					//document.body.scrollTop=0;
					$('#force').slideUp(300,function(){
						//document.body.scrollTop=0;
					});
				});
			}else if(bodyTop==bot && !istop){

				$('#force2').slideDown(300,function(){
					$('#force2').slideUp(300, function(){
						clearInterval(inter);
					});
				});
				//$('#force2').show()
				var inter=setInterval(function(){
					document.body.scrollTop+=2;
				},10);
			}
		});
		
});
</script>

</body>
<div id='force2' style='width:100%;height:60px;display:none; background-color:black;'></div>
</html>